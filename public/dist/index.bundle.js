(()=>{"use strict";var e={437:(e,t,n)=>{let o;n.d(t,{K:()=>a});const r=indexedDB.open("budget",1);function a(e){o.transaction(["pending"],"readwrite").objectStore("pending").add(e)}function c(){const e=o.transaction(["pending"],"readwrite").objectStore("pending").getAll();e.onsuccess=function(){e.result.length>0&&fetch("/api/transaction/bulk",{method:"POST",body:JSON.stringify(e.result),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((e=>e.json())).then((()=>{o.transaction(["pending"],"readwrite").objectStore("pending").clear()}))}}r.onupgradeneeded=function(e){e.target.result.createObjectStore("pending",{autoIncrement:!0})},r.onsuccess=function(e){o=e.target.result,navigator.onLine&&c()},r.onerror=function(e){console.log("Woops! "+e.target.errorCode)},window.addEventListener("online",c)}},t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(437);let t,o=[];function r(){let e=o.reduce(((e,t)=>e+parseInt(t.value)),0);document.querySelector("#total").textContent=e}function a(){let e=document.querySelector("#tbody");e.innerHTML="",o.forEach((t=>{let n=document.createElement("tr");n.innerHTML=`\n      <td>${t.name}</td>\n      <td>${t.value}</td>\n    `,e.appendChild(n)}))}function c(){let e=o.slice().reverse(),n=0,r=e.map((e=>{let t=new Date(e.date);return`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()}`})),a=e.map((e=>(n+=parseInt(e.value),n)));t&&t.destroy();let c=document.getElementById("myChart").getContext("2d");t=new Chart(c,{type:"line",data:{labels:r,datasets:[{label:"Total Over Time",fill:!0,backgroundColor:"#6666ff",data:a}]}})}function i(t){let n=document.querySelector("#t-name"),i=document.querySelector("#t-amount"),l=document.querySelector(".form .error");if(""===n.value||""===i.value)return void(l.textContent="Missing Information");l.textContent="";let u={name:n.value,value:i.value,date:(new Date).toISOString()};t||(u.value*=-1),o.unshift(u),c(),a(),r(),fetch("/api/transaction",{method:"POST",body:JSON.stringify(u),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{e.errors?l.textContent="Missing Information":(n.value="",i.value="")})).catch((t=>{(0,e.K)(u),n.value="",i.value=""}))}fetch("/api/transaction").then((e=>e.json())).then((e=>{o=e,r(),a(),c()})),document.querySelector("#add-btn").onclick=function(){i(!0)},document.querySelector("#sub-btn").onclick=function(){i(!1)}})()})();