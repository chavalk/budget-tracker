(()=>{"use strict";var e={};let n;e.d=(n,t)=>{for(var o in t)e.o(t,o)&&!e.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},e.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);const t=indexedDB.open("budget",1);function o(){const e=n.transaction(["pending"],"readwrite").objectStore("pending").getAll();e.onsuccess=function(){e.result.length>0&&fetch("/api/transaction/bulk",{method:"POST",body:JSON.stringify(e.result),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((e=>e.json())).then((()=>{n.transaction(["pending"],"readwrite").objectStore("pending").clear()}))}}t.onupgradeneeded=function(e){e.target.result.createObjectStore("pending",{autoIncrement:!0})},t.onsuccess=function(e){n=e.target.result,navigator.onLine&&o()},t.onerror=function(e){console.log("Woops! "+e.target.errorCode)},window.addEventListener("online",o)})();